---
date: '2020-03-23'
title: 'Natural sort order : trier un tableau comme un humain'
featuredImage: '../images/2020-03-23-natural-sort-order/sort.jpg'
lang: fr
i18n:
  - locale: en
    slug: /2020-03-23-en-natural-sort-order
---

<Image align="right" caption="Photo par Brooke Lark sur Unsplash">

![](../images/2020-03-23-natural-sort-order/sort.jpg)

</Image>

Lors de mes Ã©tudes d'ingÃ©nieur, j'ai du apprendre plusieurs algorithme de tri : quicksort, tri par tas, tri bulle... Pour Ãªtre franc, je ne les ai utilisÃ© qu'une seule fois par la suite. C'Ã©tait lors d'un entretien pour dÃ©crocher mon premier job... et j'ai ratÃ© !

Il est Ã©vident que pour manipuler des grandes quantitÃ© de donnÃ©es, ces algorithmes sont utiles. Les ayant dÃ©jÃ  appris, il me sera plus facile de les mettre en pratique si la complexitÃ© des projets le demande. Pour l'instant, les donnÃ©es que j'ai eu besoin de manipuler Ã©taient relativement petites et j'ai toujours rÃ©ussi Ã  m'en tenir aux mÃ©thodes standard de tri fournies par l'API JavaScript.

Mais est-ce que j'utiliserai JavaScript pour trier des donnÃ©es provenant d'un Ã©norme tableau ? Spoiler : je ne pense pas!

## 1. Array.sort()

La facon la plus simple de trier un tableau Ã  l'aide de JavaScript est la mÃ©thode Array.sort().

Elle converti les Ã©lÃ©ments de tableau en string et compare leur code UTC-16 pour les trier de faÃ§on croissante

```js
const days  = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']
days.sort()
// > [ "Friday", "Monday", "Thursday", "Tuesday", "Wednesday" ]
```

C'est pratique pour trier un tableau de string, mais trÃ¨s limitÃ© lorsque vous devez travailler avec d'autres structures de donnÃ©es.

```js
const numbers = [1, 5, 23, 1001]
numbers.sort()
// > [ 1, 1001, 23, 5 ]


const days = [{"name": "Monday"}, {"name": "Tuesday"}, {"name": "Wednesday"}, {"name": "Thursday"}, {"name": "Friday"}]
days.sort()
// > [{"name": "Monday"}, {"name": "Tuesday"}, {"name": "Wednesday"}, {"name": "Thursday"}, {"name": "Friday"}]
// Hum... rien n'a changÃ©
```

## 2. La fonction de comparaison d'Array.sort()

Pour les donnÃ©es plus complexes, vous pouvez prendre la responsabilitÃ© d'indiquer Ã  Array.sort comment trier les Ã©lÃ©ments du tableau. Le premier paramÃ¨tre (optionel) est une fonction qui permet de comparer 2 Ã©lÃ©ments entre eux. Si elle renvoie une valeur nÃ©gative, cela signifie que le permier Ã©lÃ©ment passÃ© en paramÃ¨tres est plus grand que le 2nd et si la valeur est nÃ©gative, c'est l'inverse. Si la valeur de retour est zÃ©ro, les 2 Ã©lÃ©ments seront considÃ©rÃ©s comme Ã©gaux.

```js
function compare(a, b) {
  if (a is less than b by some ordering criterion) {
    return -1;
  }
  if (a is greater than b by the ordering criterion) {
    return 1;
  }
  // a must be equal to b
  return 0;
}

// src: developer.mozilla.org
```

GrÃ¢ce Ã  cette fonction de comparaison, il est ainsi possible de comparer des nombres, des chaines de caractÃ¨res alphabÃ©tiques, des dates... Mais que se passe-t-il si vous devez comparer des chaines contenant Ã  la fois des nombres et des lettres ?

## 3. L'order de tri naturel (natural sort order)

Le "natural sort order" est la faÃ§on la plus Ã©vidente qu'auront des humains de trier un tableau. Imaginons cette collection de meubles
```js
const furnitures = [
  'Bed13',
  'table2',
  'chair3',
  'Chair100',
  'chair54',
  'table123',
  'Table36',
  'Bed2',
  'Chair4'
    ]
```

Intl.Collator vous aidera Ã  trier cette collection en crÃ©ant un objet qui comparera les chaines de caractÃ¨res en fonction de la langue que vous lui indiquez (pour ignorer certains signes de ponctuations spÃ©cifiques par exemple), et vous pourrez ajouter des options pour manipuler la comparaison de chaines alphabÃ©tico-numÃ©riques. De cettes faÃ§on, les meubles pourront Ãªtre triÃ©s dans un ordre que ma grand-mÃ¨re (et vos clients) trouvera acceptable ðŸ‘µðŸ»

```js
const collator = new Intl.Collator('fr-FR', { numeric: true })
furnitures.sort(collator.compare)

// > [ "Bed2", "Bed13", "chair3", "Chair4", "chair54", "Chair100", "table2", "Table36", "table123" ]
```

Pour en savoir plus sur les options d'Intl.Collator, je vous conseille la [documentation du MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator/Collator)
